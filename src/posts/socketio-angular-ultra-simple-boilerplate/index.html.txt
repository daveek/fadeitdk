<!doctype html>
<html ng-app="myApp">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.min.js"></script>
  </head>
  <body ng-controller="myAppCtrl">
    <textarea ng-model="messages" rows=15 cols=80></textarea><br/>
    <input ng-model="message"></input>
    <button ng-click="send()">Send</button>
    <script>
      var app = angular.module("myApp", []);
      app.controller("myAppCtrl", function($scope) {
        var socket = io('http://localhost:3000');
        $scope.messages = '';
        $scope.send = function(){
          socket.emit('message', $scope.message);
          $scope.message = '';
        }
        socket.on('message', function(message){
          $scope.$apply(function(){
            $scope.messages += message + "\n";
          });
        });
      });
    </script>
  </body>
</html>
